---
title: 加/解密算法
date: 2022-02-08
tags:
 - java
categories:
 - 后端
---

# Java 加密/解密

# 1. 介绍

> 加密: 在网络上传输的原始数据(明文)经过加密后形成(密文)传输,防止被窃取.
>
> 解密: 将密文还原成原始数据.

# 2. 加密方式分类

> 对称加密(DES,AES,Base64): 对加密和解密使用的是同一个密钥
>
> 非对称加密(RSA): 非对称式加密需要两个密钥(双钥), 分别叫公钥和私钥,这两把密钥可以相互加解密.
>
> ​					公钥公开的,不需要保密,而私钥是保密的.
>
> MD5: 摘要算法(也叫哈希算法/散列算法),完全不考虑解密,只考虑加密,是不可逆的

# 3. 加密方式详解

## 3.1 对称加密类型

> DES加密算法
>
> AES加密算法
>
> Base64加密算法

## 3.2 非对称加密类型

> RSA加密算法(主流的加密算法,数字证书都是用这种)
>
> 场景1: 公钥加密 ,私钥解密
>
> 两个用户,A和B,B有双钥,A想要把一个数据报文通过加密的方式发送给B
>
> ![截屏2022-02-08 下午3.52.26](https://tva1.sinaimg.cn/large/008i3skNgy1gz65mt0nznj30qo0jedgr.jpg)
>
>  
>
> 场景2: 私钥加密(叫做数字签名), 公钥解密(验证签名)
>
> 两个用户,A和B,B有双钥,B想要把一个数据报文通过加密的方式发送给A
>
> 数字证书由来: 因为公钥是公开的不安全,所以需要第三方的CA机构(数字证书颁发机构)来对公钥进行加密,加密后的东西就叫-数字证书. 数字证书包括: B用户基本信息及B的公钥信息.(遵循X509的标准)
>
> CA机构: CA机构也是拥有双钥的, 用它自己的私钥对B用户的公钥进行加密
>
> ![截屏2022-02-08 下午4.08.45](https://tva1.sinaimg.cn/large/008i3skNgy1gz6645b15xj31720m8q5d.jpg)
>
>  
>
> fiddler抓包工具不能直接抓取https协议的数据报文,需要安装一个数字证书.
>
> https=http+ssl安全传输协议
>
> ssl安全传输协议: 安全套接层,Netscape研发(Netscape相当于场景中的B角色,fiddler相当于A角色,区别在于CA机构没有把证书直接给Netscape,而是发布到网络上,让fiddler自己去下载,所以fiddler安装数字证书,其实就是拿到Netscape的公钥,然后就可以对ssl协议的报文解密了).
>
> ![截屏2022-02-08 下午4.19.44](https://tva1.sinaimg.cn/large/008i3skNgy1gz66fky4ypj317a0pewhb.jpg)
>
> 

# 4. 接口签名sign原理

## 4.1 什么是接口签名

>使用用户名,密码,随机字符串,时间戳和所有的排过序之后的参数组合起来,再加密得到的字符串,就是签名.这个签名是唯一的有访问第三方(金融)接口的鉴权码.

## 4.2 为什么需要做接口签名

> 1.防伪装攻击
>
> 2.防篡改攻击
>
> 3.防重放攻击(被拦截,不断重复的请求)
>
> 4.防数据泄漏

## 4.3 如何做接口签名

> 了解签名规则:
>
> 1. 对所有请求的参数的key按ASCII码做升序排序
>
>    {"c":3 ,"b":2,"a":1} 排序后: {"a":1,"b":2,"c":3}
>
> 2. 把参数名和参数值连接成字符串:
>
>    a=1&b=2&c=3
>
> 3. 用申请到的appid和appsecret连接到字符串的头部
>
>    appid: 111 
>
>    appsecret: 222
>
>    appid=111&appsecret=222&a=1&b=2&c=3
>
> 4. 用时间戳连接到字符串的尾部,作用是控制签名的有效期限
>
>    appid=111&appsecret=222&a=1&b=2&c=3&timestamp=1234567890
>
> 5. 然后再把这个字符串按照32位的MD5加密,加密后再转化为大写,得到的字符串就是签名
>
>    D9412A6C46018F46BE411B7961BBF3FD
